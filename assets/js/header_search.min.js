function header_searchHandler(){const fakeDelaySearch=600,minIndex=2,url="/project06/products/index.html",resultLimit=10,pcSearch=document.querySelector(".header__search_input"),pcResultBox=document.querySelector(".result__body_items"),mobileSearch=document.querySelector(".navMobile__side .header__search_input"),mobileResultBox=document.querySelector(".navMobile__side  .result__body_items"),mobileReset=document.querySelector(".header__search_reset");let keyWord,lastKeyWord,condition,result,failing=!1,waiting=!0,looking=!1,timeOut;const defaultType={fail:{icon:'<div class="icon--error"></div>',msg:"Sorry, found nothing"},wait:{icon:'<div class="result_item_loader"></div>',msg:"Type at least 2 letters..."},looking:{icon:'<div class="result_item_loader"></div>',msg:"Searching..."}};function keydownFunc(e){lastKeyWord=this.value}function searchFunc(e){keyWord=this.value,condition=!!keyWord&&keyWord.trim().length>=2,timeOut&&clearTimeout(timeOut),condition?keyWord!=lastKeyWord&&beforeSearch(keyWord):waiting||(waiting=!0,resetSearchResult(),resultToWeb(htmlDefault("wait")),failing=!1)}function beforeSearch(keyWord){looking||(looking=!0,failing||(resetSearchResult(),resultToWeb(htmlDefault("looking")))),timeOut=setTimeout(()=>{looking=!1,search(keyWord)},600)}function search(keyWord){waiting=!1,keyWord=keyWord.toLowerCase(),result=_product_items.filter(r=>r.name.toLowerCase().includes(keyWord)),result&&result[0]?(failing=!1,resetSearchResult(),result.forEach((r,i)=>{i<10&&resultToWeb(htmlProduct(r),!0)})):failing||(failing=!0,resetSearchResult(),resultToWeb(htmlDefault("fail")))}function htmlProduct(obj){let types=obj.type.map(r=>`<li class="item_info__size">${r.short}</li>`).join(""),prices=obj.type.map(r=>r.price),price="";if(prices.length<2)price=obj.currency+prices[0];else{let maxP=Math.max(...prices),minP=Math.min(...prices);price=obj.currency+minP+" - "+obj.currency+maxP}let t=document.createElement("li");return t.classList.add("result__body_item"),t.classList.add("result__body_item--loading"),t.innerHTML=`\n  <a href="${url+"?id="+obj.id}" class="result__body_item_wrapper"><div class="result_item_cover"><img src="${obj.cover}" alt="" /></div><div class="result_item_info"><p class="item_info__name">${obj.name}</p><ul class="item_info__sizes">${types}</ul><p class="item_info__price">${price}</p></div></a>`,t}function htmlDefault(type){let t=document.createElement("li");return t.classList.add("result__body_item"),t.classList.add("result__body_item--noClick"),t.innerHTML=`<div class="result__body_item_wrapper"><div class="result_item_cover">${defaultType[type].icon}</div><div class="result_item_info"><p class="item_info__name item_info__name--error">${defaultType[type].msg}</p></div></div>`,t}function resetSearchResult(){pcResultBox.innerHTML="",mobileResultBox&&(mobileResultBox.innerHTML="")}function resultToWeb(html,hasImg){pcResultBox.appendChild(html);let cl=html.cloneNode(!0);if(mobileResultBox&&mobileResultBox.appendChild(cl),hasImg){let img=html.querySelector("img"),imgCl=cl.querySelector("img");img.complete?html.classList.add("result__body_item--loaded"):img.onload=e=>{html.classList.add("result__body_item--loaded")},imgCl.complete?cl.classList.add("result__body_item--loaded"):imgCl.onload=e=>{cl.classList.add("result__body_item--loaded")}}}resetSearchResult(),resultToWeb(htmlDefault("wait")),pcSearch.addEventListener("keydown",keydownFunc),pcSearch.addEventListener("keyup",searchFunc),mobileSearch&&(mobileSearch.addEventListener("keydown",keydownFunc),mobileSearch.addEventListener("keyup",searchFunc),mobileReset.addEventListener("click",e=>{resetSearchResult(),resultToWeb(htmlDefault("wait"))}))}document.addEventListener("readystatechange",()=>{"complete"===document.readyState&&header_searchHandler()});